package at.tomtasche.contacts.droid;

import java.util.LinkedList;
import java.util.List;

import android.content.Context;
import android.content.res.Resources;
import at.tomtasche.contacts.droid.lookup.LookupMethod;

/**
 * Used to store information, such as name, number, etc about a contact.
 * 
 * @author Thomas Taschauer
 */
public class Contact {

    private final LookupMethod lookupMethod;
    private final Context context;

    private String firstname = "";
    private String lastname = "";
    private String nickname = "";
    private String title = ""; // Dr., Sir, ...
    private String fullname = "";
    private String address = ""; // number, mail, twitter, ...
    private String type = "";
    private String lookupString = "";

    private LinkedList<Long> groups;


    /**
     * 
     * @param context
     * @param lookupMethod 
     * @param address
     */
    public Contact(Context context, final LookupMethod lookupMethod, String address) {
        this.context = context;
        this.address = address;
        this.lookupMethod = lookupMethod;

        lookupMethod.getLookup(this);
    }


    public String getAddress() {
        return address;
    }

    public String getFirstname() {
        if (firstname == null) Name.getFirstname(context, this);

        return firstname;
    }

    public String getFullname() {
        if (fullname == null) Name.getFullname(context, this);

        return fullname;
    }

    public List<Long> getGroups() {
        if (groups == null) Name.getGroups(context, this);

        return groups;
    }

    public String getLastname() {
        if (lastname == null) Name.getLastname(context, this);

        return lastname;
    }

    public LookupMethod getLookupMethod() {
        return lookupMethod;
    }

    public String getLookupString() {
        return lookupString;
    }

    public String getNickname() {
        if (nickname == null) Name.getNickname(context, this);

        return nickname;
    }

    public String getTitle() {
        if (title == null) Name.getPrefix(context, this);

        return title;
    }

    public String getAddressType() {
        if (type == null) getLookupMethod().getType();

        return type;
    }

    public String getUnknownString() {
        final String s = Resources.getSystem().getString(android.R.string.unknownName);
        return s.substring(1, s.length() - 1);
    }
}
