package com.announcify.activity.widget;

import greendroid.widget.item.Item;
import greendroid.widget.item.TextItem;
import greendroid.widget.itemview.ItemView;

import java.io.IOException;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.view.ViewGroup;

import com.announcify.R;

public class AnnouncificationItem extends Item {
	public Drawable drawable;

	public String action;
	protected boolean broadcast;

	public AnnouncificationItem(final String text, final Drawable drawable, final String action, final boolean broadcast) {
		super(text);
		this.drawable = drawable;
		this.action = action;
		this.broadcast = broadcast;
	}

	@Override
	public ItemView newView(final Context context, final ViewGroup parent) {
		return createCellFromXml(context, R.layout.list_item_announcification, parent);
	}
	
	public void fireAction(Context context) {
		final Intent intent = new Intent(action);
		if (broadcast) {
			context.sendBroadcast(intent);
		} else {
			context.startActivity(intent);
		}
	}
}