
package com.announcify.api.background.util;

import android.content.Context;
import android.content.SharedPreferences;

public abstract class PluginSettings {

    public static final String KEY_RINGTONE = "preference_ringtone";

    public static final String KEY_READING_BREAK = "preference_reading_break";

    public static final String KEY_READING_REPEAT = "preference_reading_repeat";

    public static final String KEY_READING_WAIT = "preference_reading_wait";

    public static final String KEY_READING_UNKNOWN = "preference_reading_unknown";

    public static final String KEY_READING_UNKNOWN_CUSTOM = "preference_reading_unknown_custom";

    public static final String KEY_READING_DISCREET = "preference_reading_discreet";

    public static final String KEY_READING_DISCREET_CUSTOM = "preference_reading_discreet_custom";

    public static final String KEY_READING_ANNOUNCEMENT = "preference_reading_announcement";

    public static final String KEY_READING_ANNOUNCEMENT_CUSTOM = "preference_reading_announcement_custom";

    protected final String name;
    
    protected final SharedPreferences preferences;

    protected final AnnouncifySettings defaultSettings;

    protected final Context context;

    public PluginSettings(final Context context, final String name) {
        preferences = context.getSharedPreferences(name, Context.MODE_WORLD_READABLE);
        defaultSettings = new AnnouncifySettings(context);
        this.context = context;
        this.name = name;
    }

    public int getReadingBreak() {
        final int i = Integer.parseInt(preferences.getString(KEY_READING_BREAK,
                String.valueOf(defaultSettings.getDefaultReadingBreak())));

        if (i == 0) {
            return 0;
        }

        return i < 1000 ? i * 1000 : i;
    }

    public int getReadingRepeat() {
        return Integer.parseInt(preferences.getString(KEY_READING_REPEAT,
                String.valueOf(defaultSettings.getDefaultReadingRepeat())));
    }

    public int getReadingWait() {
        final int i = Integer.parseInt(preferences.getString(KEY_READING_WAIT,
                String.valueOf(defaultSettings.getDefaultReadingWait())));

        if (i == 0) {
            return 0;
        }

        return i < 1000 ? i * 1000 : i;
    }

    public String getUnknownMode() {
        return preferences.getString(KEY_READING_UNKNOWN, defaultSettings.getDefaultUnknownMode());
    }

    public String getDefaultMode() {
        return preferences.getString(KEY_READING_ANNOUNCEMENT,
                defaultSettings.getDefaultDefaultMode());
    }

    public String getDiscreetMode() {
        return preferences
                .getString(KEY_READING_DISCREET, defaultSettings.getDefaultDiscreetMode());
    }

    public String getSharedPreferencesName() {
        return PREFERENCES_NAME;
    }

    public abstract String getEventType();

    public abstract int getPriority();

    public abstract String getSettingsAction();
}
