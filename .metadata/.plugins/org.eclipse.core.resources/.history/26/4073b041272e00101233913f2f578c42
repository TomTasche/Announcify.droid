
package com.announcify.background.error;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.List;

import org.acra.ErrorReporter;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.IntentService;
import android.content.Intent;
import android.os.Build;
import android.util.Log;

import com.announcify.api.background.error.ExceptionHandler;

public class ExceptionService extends IntentService {
    public ExceptionService() {
        super("ExceptionService");
    }

    @Override
    protected void onHandleIntent(final Intent intent) {
        ErrorReporter reporter = ErrorReporter.getInstance();
        reporter.putCustomData("plugin", intent
                .getStringExtra(ExceptionHandler.PACKAGE));
        reporter.handleException((Throwable)intent.getSerializableExtra(ExceptionHandler.STACKTRACE));
        reporter.removeCustomData("plugin");
    }
}
