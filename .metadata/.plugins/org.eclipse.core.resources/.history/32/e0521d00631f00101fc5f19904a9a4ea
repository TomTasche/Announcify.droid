
package com.announcify.api.contact.lookup;

import android.content.Context;
import android.database.Cursor;
import android.provider.ContactsContract.CommonDataKinds.Nickname;
import android.provider.ContactsContract.CommonDataKinds.StructuredName;
import android.provider.ContactsContract.Contacts;
import android.provider.ContactsContract.Data;

import com.announcify.api.contact.Contact;

public class Name {
    public static void getFullname(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.DISPLAY_NAME
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            contact.setFullname(cursor.getString(0));
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getFirstname(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.GIVEN_NAME
            }, StructuredName.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            contact.setFirstname(cursor.getString(0));
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getLastname(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.FAMILY_NAME
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            contact.setLastname(cursor.getString(0));
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getMiddlename(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.MIDDLE_NAME
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            // TODO: implement?
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getPrefix(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.PREFIX
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            contact.setTitle(cursor.getString(0));
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getSuffix(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                StructuredName.SUFFIX
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            // TODO: implement?
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getNickname(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(
                    Data.CONTENT_URI,
                    new String[] {
                        Nickname.NAME
                    },
                    Data.MIMETYPE + " = " + "'" + Nickname.CONTENT_ITEM_TYPE + "'" + " AND "
                            + Nickname.DISPLAY_NAME + " = '?'", new String[] {
                        contact.getLookupString()
                    }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            contact.setNickname(cursor.getString(0));
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }

    public static void getGroup(final Context context, final Contact contact) {
        Cursor cursor = null;

        try {
            cursor = context.getContentResolver().query(Data.CONTENT_URI, new String[] {
                Data.IN_VISIBLE_GROUP
            }, Contacts.LOOKUP_KEY + " = '?'", new String[] {
                contact.getLookupString()
            }, null);
            if (!cursor.moveToFirst()) {
                return;
            }

            // TODO: implement!
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    }
}
